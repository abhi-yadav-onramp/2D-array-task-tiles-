import{a as h,t as U,c as _e,d as ae}from"../chunks/disclose-version.CI5jOE9z.js";import{av as Ie,ac as Qe,aw as Ve,as as X,b as Xe,p as Ye,ax as I,ay as Ze,s as W,f as Q,t as G,a as et,az as tt,$ as at,c as H,U as t,V as B,r as j,A as C,W as re,ae as q}from"../chunks/runtime.CWXoeozj.js";import{s as V}from"../chunks/render.DhGnFNZY.js";import{i as K}from"../chunks/if.BFHXJMvG.js";import{e as se,i as xe}from"../chunks/each.UV7sBcvo.js";import{h as rt}from"../chunks/svelte-head.Dsx1Xwo-.js";import{r as st,s as we,a as ke}from"../chunks/attributes.sq-xGM6p.js";import{t as D,s as ot}from"../chunks/class.CW7JzOCO.js";import{e as ue}from"../chunks/events.BLL9sOXc.js";import{s as nt,i as it,a as ct}from"../chunks/store.C7a1M3qg.js";import{p as Ae}from"../chunks/props.CPSkFctN.js";import{p as lt,i as dt,a as ut}from"../chunks/entry.9aiTB5X-.js";import{r as mt}from"../chunks/index.C6B2tssX.js";function je(a,o,p){Ie(()=>{var u=Qe(()=>o(a,p==null?void 0:p())||{});if(p&&(u!=null&&u.update)){var n=!1,f={};Ve(()=>{var l=p();X(l),n&&Xe(f,l)&&(f=l,u.update(l))}),n=!0}if(u!=null&&u.destroy)return()=>u.destroy()})}function Pe(a){return function(...o){var p=o[0];return p.preventDefault(),a.apply(this,o)}}var ze="mz3PUW_p",Ee=["#FFC700","#FF0000","#2E3191","#41BBC7"],Se=3500,We=.5,Le=150,Ue="mix",$e=12,Me="",He=!0,Te=800,Ce=1600;function pt(a,o={}){let{colors:p=Ee,duration:u=Se,force:n=We,particleCount:f=Le,particleShape:l=Ue,particleSize:v=$e,particleClass:d=Me,destroyAfterDone:P=He,stageHeight:_=Te,stageWidth:x=Ce}=o;(function(m){if(document.querySelector("style[data-neoconfetti]"))return;const e=me("style");e.dataset.neoconfetti="",e.textContent=m,pe(document.head,e)})('@keyframes mz3PUW_ya{to{translate:0 var(--sh)}}@keyframes mz3PUW_xa{to{translate:var(--xlp)0}}@keyframes mz3PUW_r{50%{rotate:var(--hr)180deg}to{rotate:var(--r)360deg}}.mz3PUW_c{z-index:1200;width:0;height:0;position:relative;overflow:visible}.mz3PUW_p{animation:xa var(--dc)forwards cubic-bezier(var(--x1),var(--x2),var(--x3),var(--x4));animation-name:mz3PUW_xa}.mz3PUW_p>div{animation:ya var(--dc)forwards cubic-bezier(var(--y1),var(--y2),var(--y3),var(--y4));width:var(--w);height:var(--h);animation-name:mz3PUW_ya;position:absolute;top:0;left:0}.mz3PUW_p>div:before{content:"";background-color:var(--bgc);animation:r var(--rd)infinite linear;border-radius:var(--br);width:100%;height:100%;animation-name:mz3PUW_r;display:block}'),a.classList.add("mz3PUW_c"),a.style.setProperty("--sh",_+"px");let $=[],T=[];const A=()=>Y(L()*(bt-1)),z=(m,e)=>l!=="rectangles"&&(m==="circles"||gt(e));function E(m,e){const s=A(),i=z(l,s),r=(b,k)=>m.style.setProperty(b,k+"");r("--xlp",ve(oe(Ne(e,90)-180),0,180,-x/2,x/2)+"px"),r("--dc",u-Y(1e3*L())+"ms");const c=L()<ft?R(L()*yt,2):0;r("--x1",c),r("--x2",-1*c),r("--x3",c),r("--x4",R(oe(ve(oe(Ne(e,90)-180),0,180,-1,1)),4)),r("--y1",R(L()*De,4)),r("--y2",R(L()*n*(Ge()?1:-1),4)),r("--y3",De),r("--y4",R(ht(ve(oe(e-180),0,180,n,-n),0),4)),r("--w",(i?v:Y(4*L())+v/2)+"px"),r("--h",(i?v:Y(2*L())+v)+"px");const w=s.toString(2).padStart(3,"0").split("");r("--hr",w.map(b=>+b/2+"").join(" ")),r("--r",w.join(" ")),r("--rd",R(L()*(vt-qe)+qe)+"ms"),r("--br",i?"50%":0)}let S;function F(){a.innerHTML="",clearTimeout(S),$=Fe(f,p),T=function(m,e=[],s){const i=[];for(const{color:r}of e){const c=me("div");c.className=`${ze} ${s}`,c.style.setProperty("--bgc",r);const w=me("div");pe(c,w),pe(m,c),i.push(c)}return i}(a,$,d);for(const[m,e]of Oe(T))E(e,$[+m].degree);S=setTimeout(()=>{P&&(a.innerHTML="")},u)}return F(),{update(m){const e=m.particleCount??Le,s=m.particleShape??Ue,i=m.particleSize??$e,r=m.particleClass??Me,c=m.colors??Ee,w=m.stageHeight??Te,b=m.duration??Se,k=m.force??We,N=m.stageWidth??Ce,y=m.destroyAfterDone??He;$=Fe(e,c);let g=!1;if(e===f){T=Array.from(a.querySelectorAll(`.${ze}`));for(const[O,{color:Z}]of Oe($)){const J=T[+O];JSON.stringify(p)!==JSON.stringify(c)&&J.style.setProperty("--bgc",Z),s!==l&&J.style.setProperty("--br",z(s,A())?"50%":"0"),r!==d&&(d&&J.classList.remove(d),r&&J.classList.add(r))}}else g=!0;P&&!y&&clearTimeout(S),a.style.setProperty("--sh",w+"px"),u=b,p=c,n=k,f=e,l=s,v=i,d=r,P=y,_=w,x=N,g&&F()},destroy(){a.innerHTML="",clearTimeout(S)}}}var qe=200,vt=800,ft=.1,yt=.3,De=.5,oe=Math.abs,L=Math.random,Y=Math.round,ht=Math.max,me=a=>document.createElement(a),pe=(a,o)=>a.appendChild(o),Fe=(a,o)=>Array.from({length:a},(p,u)=>({color:o[u%o.length],degree:360*u/a})),R=(a,o=2)=>Y((a+Number.EPSILON)*10**o)/10**o,ve=(a,o,p,u,n)=>(a-o)*(n-u)/(p-o)+u,Ne=(a,o)=>a+o>360?a+o-360:a+o,Ge=()=>L()>.5,Oe=Object.entries,bt=6,gt=a=>a!==1&&Ge();function _t(a){const o=JSON.parse(a);return o.data&&(o.data=lt(o.data)),o}function fe(a){return HTMLElement.prototype.cloneNode.call(a)}function xt(a,o=()=>{}){const p=async({action:n,result:f,reset:l=!0,invalidateAll:v=!0})=>{f.type==="success"&&(l&&HTMLFormElement.prototype.reset.call(a),v&&await dt()),(location.origin+location.pathname===n.origin+n.pathname||f.type==="redirect"||f.type==="error")&&ut(f)};async function u(n){var z,E,S,F,m;if(((z=n.submitter)!=null&&z.hasAttribute("formmethod")?n.submitter.formMethod:fe(a).method)!=="post")return;n.preventDefault();const l=new URL((E=n.submitter)!=null&&E.hasAttribute("formaction")?n.submitter.formAction:fe(a).action),v=(S=n.submitter)!=null&&S.hasAttribute("formenctype")?n.submitter.formEnctype:fe(a).enctype,d=new FormData(a),P=(F=n.submitter)==null?void 0:F.getAttribute("name");P&&d.append(P,((m=n.submitter)==null?void 0:m.getAttribute("value"))??"");const _=new AbortController;let x=!1;const T=await o({action:l,cancel:()=>x=!0,controller:_,formData:d,formElement:a,submitter:n.submitter})??p;if(x)return;let A;try{const e=new Headers({accept:"application/json","x-sveltekit-action":"true"});v!=="multipart/form-data"&&e.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(v)?v:"application/x-www-form-urlencoded");const s=v==="multipart/form-data"?d:new URLSearchParams(d),i=await fetch(l,{method:"POST",headers:e,cache:"no-store",body:s,signal:_.signal});A=_t(await i.text()),A.type==="error"&&(A.status=i.status)}catch(e){if((e==null?void 0:e.name)==="AbortError")return;A={type:"error",error:e}}T({action:l,formData:d,formElement:a,update:e=>p({action:l,result:A,reset:e==null?void 0:e.reset,invalidateAll:e==null?void 0:e.invalidateAll}),result:A})}return HTMLFormElement.prototype.addEventListener.call(a,"submit",u),{destroy(){HTMLFormElement.prototype.removeEventListener.call(a,"submit",u)}}}const Je="(prefers-reduced-motion: reduce)",wt=()=>window.matchMedia(Je).matches,kt=mt(wt(),a=>{{const o=u=>{a(u.matches)},p=window.matchMedia(Je);return p.addEventListener("change",o),()=>{p.removeEventListener("change",o)}}});var At=U('<meta name="description" content="A Wordle clone written in SvelteKit" class="svelte-1pg2j5l">'),jt=U('<div class="letter svelte-1pg2j5l"> <span class="visually-hidden svelte-1pg2j5l"><!></span> <input name="guess" type="hidden" class="svelte-1pg2j5l"></div>'),Pt=U('<h2 class="visually-hidden svelte-1pg2j5l"> </h2> <div class="row svelte-1pg2j5l"></div>',1),zt=U('<p class="svelte-1pg2j5l"> </p>'),Et=U('<!> <button data-key="enter" class="restart selected svelte-1pg2j5l" formaction="?/restart"> </button>',1),St=U('<button formaction="?/update" name="key"> </button>'),Wt=U('<div class="row svelte-1pg2j5l"></div>'),Lt=U('<div class="keyboard svelte-1pg2j5l"><button data-key="enter" class="svelte-1pg2j5l">enter</button> <button data-key="backspace" formaction="?/update" name="key" value="backspace" class="svelte-1pg2j5l">back</button> <!></div>'),Ut=U('<div style="position: absolute; left: 50%; top: 30%" class="svelte-1pg2j5l"></div>'),$t=U('<h1 class="visually-hidden svelte-1pg2j5l">Sverdle</h1> <form method="POST" action="?/enter" class="svelte-1pg2j5l"><a class="how-to-play svelte-1pg2j5l" href="/sverdle/how-to-play">How to play</a> <div class="grid svelte-1pg2j5l"></div> <div class="controls svelte-1pg2j5l"><!></div></form> <!>',1);function Rt(a,o){Ye(o,!1);const p=nt(),u=()=>ct(kt,"$reduced_motion",p),n=B(),f=B(),l=B(),v=B();let d=Ae(o,"data",8),P=Ae(o,"form",12),_=B(),x=B();function $(e){var i;const s=e.target.getAttribute("data-key");s==="backspace"?(C(l,t(l).slice(0,-1)),(i=P())!=null&&i.badGuess&&P(P().badGuess=!1,!0)):t(l).length<5&&C(l,t(l)+s)}function T(e){var s;e.metaKey||e.key==="Enter"&&!t(v)||(s=document.querySelector(`[data-key="${e.key}" i]`))==null||s.dispatchEvent(new MouseEvent("click",{cancelable:!0}))}I(()=>X(d()),()=>{C(n,d().answers.at(-1)==="xxxxx")}),I(()=>(t(n),X(d())),()=>{C(f,t(n)?-1:d().answers.length)}),I(()=>(t(_),X(d())),()=>{C(_,{}),C(x,{}),d().answers.forEach((e,s)=>{const i=d().guesses[s];for(let r=0;r<5;r+=1){const c=i[r];e[r]==="x"?(re(_,t(_)[c]="exact"),re(x,t(x)[c]="correct")):t(_)[c]||(re(_,t(_)[c]=e[r]==="c"?"close":"missing"),re(x,t(x)[c]=e[r]==="c"?"present":"absent"))}})}),I(()=>(X(d()),t(f)),()=>{C(l,d().guesses[t(f)]||"")}),I(()=>t(l),()=>{C(v,t(l).length===5)}),Ze(),it();var A=$t();ue("keydown",tt,T),rt(e=>{var s=At();at.title="Sverdle",h(e,s)});var z=W(Q(A),2),E=W(H(z),2);se(E,4,()=>Array.from(Array(6).keys()),e=>e,(e,s)=>{var i=Pt();const r=q(()=>s===t(f));var c=Q(i),w=H(c);j(c);var b=W(c,2);se(b,4,()=>Array.from(Array(5).keys()),k=>k,(k,N)=>{var y=jt();const g=q(()=>t(r)?t(l):d().guesses[s]),O=q(()=>{var M;return(M=d().answers[s])==null?void 0:M[N]}),Z=q(()=>{var M;return((M=t(g))==null?void 0:M[N])??""}),J=q(()=>t(r)&&N===t(g).length),ye=q(()=>t(O)==="x"),he=q(()=>t(O)==="c"),be=q(()=>t(O)==="_");var ge=H(y),ne=W(ge),Be=H(ne);K(Be,()=>t(ye),M=>{var ee=ae("(correct)");h(M,ee)},M=>{var ee=_e(),Ke=Q(ee);K(Ke,()=>t(he),ce=>{var te=ae("(present)");h(ce,te)},ce=>{var te=_e(),Re=Q(te);K(Re,()=>t(be),le=>{var de=ae("(absent)");h(le,de)},le=>{var de=ae("empty");h(le,de)},!0),h(ce,te)},!0),h(M,ee)}),j(ne);var ie=W(ne,2);st(ie),j(y),G(()=>{D(y,"exact",t(ye)),D(y,"close",t(he)),D(y,"missing",t(be)),D(y,"selected",t(J)),V(ge,`${t(Z)??""} `),ie.disabled=!t(r),we(ie,t(Z))}),h(k,y)}),j(b),G(()=>{V(w,`Row ${s+1}`),D(b,"current",t(r))}),h(e,i)}),j(E);var S=W(E,2),F=H(S);K(F,()=>t(n)||d().answers.length>=6,e=>{var s=Et(),i=Q(s);K(i,()=>!t(n)&&d().answer,w=>{var b=zt(),k=H(b);j(b),G(()=>V(k,`the answer was "${d().answer??""}"`)),h(w,b)});var r=W(i,2),c=H(r);j(r),G(()=>V(c,`${(t(n)?"you won :)":"game over :(")??""} play again?`)),h(e,s)},e=>{var s=Lt(),i=H(s),r=W(i,2),c=W(r,2);se(c,0,()=>["qwertyuiop","asdfghjkl","zxcvbnm"],xe,(w,b)=>{var k=Wt();se(k,5,()=>b,xe,(N,y)=>{var g=St(),O=H(g);j(g),G(()=>{ke(g,"data-key",t(y)),ot(g,`${t(_)[t(y)]??""} svelte-1pg2j5l`),g.disabled=t(v),we(g,t(y)),ke(g,"aria-label",`${t(y)??""} ${(t(x)[t(y)]||"")??""}`),V(O,t(y))}),ue("click",g,Pe($)),h(N,g)}),j(k),h(w,k)}),j(s),G(()=>{i.disabled=!t(v),D(i,"selected",t(v))}),ue("click",r,Pe($)),h(e,s)}),j(S),j(z);var m=W(z,2);K(m,()=>t(n),e=>{var s=Ut();je(s,(i,r)=>pt(i,r),()=>({particleCount:u()?0:void 0,force:.7,stageWidth:window.innerWidth,stageHeight:window.innerHeight,colors:["#ff3e00","#40b3ff","#676778"]})),h(e,s)}),G(()=>{var e;D(E,"playing",!t(n)),D(E,"bad-guess",(e=P())==null?void 0:e.badGuess)}),je(z,(e,s)=>xt(e,s),()=>()=>({update:e})=>{e({reset:!1})}),h(a,A),et()}export{Rt as component};
